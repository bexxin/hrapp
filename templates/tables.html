<!-- templates/tables.html -->
{% extends "base.html" %}
{% block title %}Manage Employees{% endblock %}
{% block content %}
    <div class="container-fluid">
<h1>Tables Page</h1>

<!-- Employees Accordion -->
<div class="accordion mb-2" id="employeesAccordion">
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingEmployees">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" 
                    data-bs-target="#collapseEmployees" aria-expanded="true" 
                    aria-controls="collapseEmployees">
                <span>Employees</span>
            </button>
        </h2>
        <div id="collapseEmployees" class="accordion-collapse collapse show" 
                aria-labelledby="headingEmployees">
            <div class="accordion-body">
                {% if emp_error %}
                    <p style="color: red;">{{ emp_error }}</p>
                {% else %}
                    {% if emp_data and emp_columns %}
                        <div class="table-container">
                            <table class="table table-dark table-hover">
                                <thead>
                                    <tr>
                                        {% for name in emp_columns %}
                                            <th>{{ name }}</th>
                                        {% endfor %}
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for row in emp_data %}
                                        <tr>
                                            {% for value in row %}
                                                <td>{{ value }}</td>
                                            {% endfor %}
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <p>No employee data available.</p>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
</div>
<br/>
<!-- Departments Accordion -->
<div class="accordion mb-2" id="departmentsAccordion">
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingDepartments">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" 
                    data-bs-target="#collapseDepartments" aria-expanded="true" 
                    aria-controls="collapseDepartments">
                <span>Departments</span>
            </button>
        </h2>
        <div id="collapseDepartments" class="accordion-collapse collapse show" 
                aria-labelledby="headingDepartments">
            <div class="accordion-body">
                {% if dept_error %}
                    <p style="color: red;">{{ dept_error }}</p>
                {% else %}
                    {% if dept_data and dept_columns %}
                        <div class="table-container">
                            <table class="table table-dark table-hover">
                                <thead>
                                    <tr>
                                        {% for name in dept_columns %}
                                            <th>{{ name }}</th>
                                        {% endfor %}
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for row in dept_data %}
                                        <tr>
                                            {% for value in row %}
                                                <td>{{ value }}</td>
                                            {% endfor %}
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <p>No department data available.</p>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
</div>
<br/>
<!-- Job Accordion -->
<div class="accordion mb-2" id="jobAccordion">
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingJobs">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" 
                    data-bs-target="#collapseJobs" aria-expanded="true" 
                    aria-controls="collapseJobs">
                <span>Jobs</span>
            </button>
        </h2>
        <div id="collapseJobs" class="accordion-collapse collapse show" 
                aria-labelledby="headingJobs">
            <div class="accordion-body">
                {% if job_error %}
                    <p style="color: red;">{{ job_error }}</p>
                {% else %}
                    {% if job_data and job_columns %}
                        <div class="table-container">
                            <table class="table table-dark table-hover">
                                <thead>
                                    <tr>
                                        {% for name in job_columns %}
                                            <th>{{ name }}</th>
                                        {% endfor %}
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for row in job_data %}
                                        <tr>
                                            {% for value in row %}
                                                <td>{{ value }}</td>
                                            {% endfor %}
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <p>No Jobs data available.</p>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
</div>
<br/>
<!-- USERS Accordion -->
<div class="accordion mb-2" id="usersAccordion">
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingUsers">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" 
                    data-bs-target="#collapseUsers" aria-expanded="true" 
                    aria-controls="collapseUsers">
                <span>Users</span>
            </button>
        </h2>
        <div id="collapseUsers" class="accordion-collapse collapse show" 
                aria-labelledby="headingUsers">
            <div class="accordion-body">
                {% if user_error %}
                    <p style="color: red;">{{ user_error }}</p>
                {% else %}
                    {% if user_data and user_columns %}
                        <div class="table-container">
                            <table class="table table-dark table-hover">
                                <thead>
                                    <tr>
                                        {% for name in user_columns %}
                                            <th>{{ name }}</th>
                                        {% endfor %}
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for row in user_data %}
                                        <tr>
                                            {% for value in row %}
                                                <td>{{ value }}</td>
                                            {% endfor %}
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <p>No Users data available.</p>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}